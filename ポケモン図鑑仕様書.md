# 【ポケモン図鑑アプリ 完全実装仕様書 v4 - 統合版】

## 📋 実装状況サマリー

### ✅ 完了済み機能
- **全1025匹対応**: 段階的データ取得システム
- **フィルタモーダル**: 美しいモーダルUI実装済み
- **日本語完全対応**: ポケモン名、タイプ、能力値の日本語化
- **ページ状態保持**: 詳細ページから戻る際の状態復元
- **検索ボタン方式**: 全ポケモン対象のフィルタリング
- **タイプOR条件**: いずれかのタイプに該当するポケモンを表示
- **ヘッダーレイアウト**: 更新されたデザイン（お気に入りボタン付き）
- **お気に入り機能**: 登録数表示付きボタンでお気に入りページに遷移

### 🔄 残りの修正項目
- **進化チェーンの日本語化**: 進化チェーン内のポケモン名を日本語表示
- **出現シリーズの日本語化**: 世代別ゲームタイトルの日本語表示
- **フィルタタグの日本語化**: フィルタモーダル内のタイプ名を日本語表示

---

## 🎨 デザイン要件

### カラーパレット
```
プライマリ: #dc0a2d（赤）
セカンダリ: #3b82f6（青）
背景: #2d2d2d（ダークグレー）
フォント: rgb(255, 255, 255)
画面: linear-gradient(135deg, #a8e6cf 0%, #dcedc1 100%)
```

### ヘッダーレイアウト（実装済み）
- **中央**: 「全ポケモン図鑑」タイトル
- **右側**: 
  - 「お気に入り」ラベル
  - お気に入り登録数表示付き★ボタン
  - 表示件数切り替えボタン（20/50/100件）
- **フォント色**: 
  - ヘッダータイトル: `rgb(255, 255, 255)`
  - 表示件数切り替え: `#2d2d2d`

---

## 🎯 画面構成（実装済み）

### 1. リスト画面 (`/`)
- **ヘッダー部分**: 中央にタイトル、右にお気に入りボタンと表示件数切り替え
- **検索・フィルタエリア**: 
  - 検索バー（debounce 300ms）
  - 「🔍 フィルタ」ボタン（モーダル開く）
  - 適用中のフィルタタグ表示
- **ポケモングリッド**: レスポンシブグリッドレイアウト
- **ページネーション**: 前へ/次へボタン、ページ番号、総件数表示

### 2. フィルタモーダル（実装済み）
- **タイプフィルタ**: 18種類のタイプをチェックボックスで選択
- **身長・体重フィルタ**: レンジスライダーで範囲指定
- **出現シリーズフィルタ**: 世代別ゲームタイトル選択（OR条件）
- **操作**: 「検索実行」で適用、「クリア」でリセット

### 3. 詳細ページ (`/pokemon/:id`)（実装済み）
- **独立ページ**: モーダルではなく専用ページ
- **左側パネル**: 大きな画像、前へ/次へボタン、お気に入りボタン
- **右側パネル**: 基本情報、説明、能力値、進化チェーン、出現シリーズ
- **状態保持**: 「リストに戻る」で元のページ状態を復元

### 4. お気に入り画面 (`/favorites`)（実装済み）
- **リスト画面と同じレイアウト**
- **ヘッダー**: 「お気に入り: X件」表示
- **空状態**: お気に入りが0件の場合の表示

---

## 🌐 日本語対応仕様

### ✅ 実装済み
- **ポケモン名**: pokemon-speciesエンドポイントから日本語名を取得
- **タイプ名**: `TYPE_TRANSLATIONS`で英語→日本語変換
- **能力値**: `STAT_TRANSLATIONS`で英語→日本語変換

### 🔄 修正が必要
- **進化チェーン**: 進化チェーン内のポケモン名を日本語表示
- **出現シリーズ**: 世代別ゲームタイトルを日本語表示
- **フィルタタグ**: フィルタモーダル内のタイプ名を日本語表示

---

## 🔄 データ取得・管理仕様（実装済み）

### 段階的データ取得システム
1. **初回**: 全1025匹のリストを取得（IDとURLのみ）
2. **バックグラウンド**: 100匹ずつ詳細データを段階的に取得
3. **キャッシュ**: API呼び出しを削減
4. **フィルタリング**: 全ポケモンを対象にフィルタ適用
5. **ページング**: フィルタ結果に対してページング適用

### フィルタリングロジック（実装済み）
- **タイプフィルタ**: OR条件（いずれかのタイプに該当）
- **身長・体重フィルタ**: 範囲指定
- **出現シリーズフィルタ**: OR条件（いずれかの世代に該当）
- **検索フィルタ**: 名前・番号での検索

---

## 🔄 ページ状態の保持機能（実装済み）

### React Router state使用
- **詳細ページ遷移時**: 現在のページ、表示件数、フィルタ条件、スクロール位置を保存
- **リストページ復元**: `useLocation`で状態を取得し、`useEffect`で適用
- **スクロール位置復元**: `window.scrollTo`で復元

---

## 🎯 残りの修正項目（優先度順）

### 1. 進化チェーンの日本語化（高優先度）
**問題**: 進化チェーン内のポケモン名が英語表記
**修正内容**:
- `parseEvolutionChain`関数で日本語名も取得
- 詳細ページで`evolution.nameJa || evolution.name`を使用

### 2. 出現シリーズの日本語化（高優先度）
**問題**: 世代別ゲームタイトルが英語表記
**修正内容**:
- `GENERATION_TRANSLATIONS`を`translatePokemon.js`に追加
- `getGenerationLabel`関数で世代名を日本語変換
- 詳細ページで`getGenerationLabel(pokemon.generation)`を使用

### 3. フィルタタグの日本語化（中優先度）
**問題**: フィルタモーダル内のタイプ名が英語表記
**修正内容**:
- `FilterModal.jsx`で`TYPE_TRANSLATIONS`を使用
- タイプバッジに日本語名を表示

---

## 🚀 実装手順（残り作業）

### Phase 1: 進化チェーンの日本語化
1. `pokemonApi.js`の`parseEvolutionChain`関数を修正
2. 各進化ポケモンの日本語名を取得
3. `PokemonDetailPage.jsx`で日本語名を表示

### Phase 2: 出現シリーズの日本語化
1. `translatePokemon.js`に`GENERATION_TRANSLATIONS`を追加
2. `getGenerationLabel`関数を実装
3. `PokemonDetailPage.jsx`で世代名を日本語表示

### Phase 3: フィルタタグの日本語化
1. `FilterModal.jsx`で`TYPE_TRANSLATIONS`を使用
2. タイプバッジに日本語名を表示

---

## 📁 ファイル構成（現在）

```
src/
├── components/
│   ├── PokemonList.jsx        # ✅ 実装済み
│   ├── PokemonCard.jsx        # ✅ 実装済み
│   ├── PokemonDetailPage.jsx  # ✅ 実装済み（進化チェーン・出現シリーズの日本語化が必要）
│   ├── FilterModal.jsx        # ✅ 実装済み（タイプ名の日本語化が必要）
│   ├── SearchBar.jsx          # ✅ 実装済み
│   ├── Pagination.jsx         # ✅ 実装済み
│   ├── FavoritesPage.jsx      # ✅ 実装済み
│   └── Navigation.jsx          # ✅ 実装済み
├── hooks/
│   ├── usePokemonData.js      # ✅ 実装済み
│   ├── useFavorites.js        # ✅ 実装済み
│   └── useDebounce.js         # ✅ 実装済み
├── utils/
│   ├── pokemonApi.js          # ✅ 実装済み（進化チェーンの日本語化が必要）
│   ├── translatePokemon.js    # ✅ 実装済み（世代翻訳の追加が必要）
│   └── filterPokemon.js       # ✅ 実装済み
└── App.jsx                    # ✅ 実装済み
```

---

## 🎯 実装チェックリスト（残り作業）

### 日本語化の完了
- [ ] 進化チェーン内のポケモン名を日本語化
- [ ] 出現シリーズ（世代別ゲームタイトル）を日本語化
- [ ] フィルタモーダル内のタイプ名を日本語化

### 品質向上
- [ ] エラーハンドリングの改善
- [ ] ローディング状態の最適化
- [ ] レスポンシブデザインの微調整

---

## 🚀 アプリケーションの起動

```bash
cd pokemon-pokedex
npm start
```

**現在の状態**: 基本的な機能はすべて実装済み。残りは日本語化の完全対応のみ。

---

## 📝 実装メモ

### 技術スタック
- **フレームワーク**: React (Vite)
- **API**: PokéAPI
- **状態管理**: useState, useEffect
- **ルーティング**: React Router v6
- **スタイリング**: CSS

### 主要機能
- **全1025匹対応**: 段階的データ取得
- **フィルタリング**: モーダルUI、全ポケモン対象
- **ページ状態保持**: React Router state使用
- **お気に入り機能**: localStorage使用
- **日本語対応**: ポケモン名、タイプ、能力値

### パフォーマンス最適化
- **キャッシュ**: API呼び出し削減
- **並列処理**: 複数ポケモンの同時取得
- **段階的読み込み**: バックグラウンドでの詳細データ取得
- **debounce**: 検索入力の最適化