# ポケモン図鑑アプリ v3 トレーサビリティマトリクス

## 1. ドキュメント情報

| 項目 | 内容 |
|------|------|
| プロジェクト名 | ポケモン図鑑アプリ v3 |
| バージョン | v3.0 |
| 作成日 | 2025-11-30 |
| 作成者 | QAエンジニア |
| 承認者 | - |
| 承認日 | - |

---

## 2. トレーサビリティマトリクス

### 凡例
- ✅ = 対応するテスト条件あり
- ⚠️ = 部分的に対応
- ❌ = テスト条件なし
- **太字** = 重要・仕様変更点

### 2.1 データ取得機能

| 要件ID | 要件内容 | テスト条件ID | カバレッジ | 備考 |
|--------|----------|-------------|-----------|------|
| REQ-001 | 全1025匹のポケモンリストを取得 | TC-001 | ✅ | 基本機能 |
| REQ-002 | ポケモン詳細データを取得 | TC-002 | ✅ | 段階的取得 |
| REQ-003 | 日本語名・説明文を取得 | TC-003, TC-004 | ✅ | 仕様要件 |
| REQ-004 | APIエラーハンドリング | TC-005, TC-006 | ✅ | エラーハンドリング |

### 2.2 検索・フィルタ機能

| 要件ID | 要件内容 | テスト条件ID | カバレッジ | 備考 |
|--------|----------|-------------|-----------|------|
| REQ-005 | 検索機能（名前・No.） | TC-008, TC-009, TC-010, TC-011, TC-012, TC-013 | ✅ | 基本機能 |
| **REQ-006** | **タイプフィルタ（AND条件）** | **TC-014, TC-015, TC-016, TC-017, TC-018, TC-019** | ✅ | **仕様変更点・重要** |
| REQ-007 | 身長・体重フィルタ | TC-020, TC-021, TC-022, TC-023, TC-024, TC-025, TC-026 | ✅ | 主要機能 |
| **REQ-008** | **出現シリーズフィルタ（OR条件）** | **TC-027, TC-028, TC-029, TC-030, TC-031, TC-032** | ✅ | **仕様変更点・重要** |
| REQ-009 | フィルタ適用タイミング | TC-037, TC-038 | ✅ | 検索ボタン方式 |
| REQ-010 | フィルタ対象範囲 | TC-043, TC-044, TC-045 | ✅ | 全1025匹対象 |

### 2.3 表示機能

| 要件ID | 要件内容 | テスト条件ID | カバレッジ | 備考 |
|--------|----------|-------------|-----------|------|
| REQ-011 | ページネーション | TC-053, TC-054, TC-055, TC-056, TC-057, TC-058, TC-059, TC-060, TC-061 | ✅ | 基本機能 |
| REQ-012 | レスポンシブ対応 | TC-099, TC-100 | ⚠️ | PCのみテスト |
| REQ-013 | 日本語表示 | TC-003, TC-004, TC-018, TC-031, TC-050, TC-051, TC-068, TC-070, TC-072, TC-075 | ✅ | 仕様要件 |

### 2.4 お気に入り機能

| 要件ID | 要件内容 | テスト条件ID | カバレッジ | 備考 |
|--------|----------|-------------|-----------|------|
| REQ-014 | お気に入り登録・解除 | TC-080, TC-081, TC-082, TC-083 | ✅ | 主要機能 |
| REQ-015 | お気に入り画面 | TC-084, TC-085, TC-086 | ✅ | 主要機能 |

### 2.5 ページ状態保持機能

| 要件ID | 要件内容 | テスト条件ID | カバレッジ | 備考 |
|--------|----------|-------------|-----------|------|
| REQ-016 | 詳細ページから戻る際の状態保持 | TC-087, TC-088, TC-089, TC-090 | ✅ | UX向上 |
| REQ-017 | 状態保持の方法 | TC-087, TC-088, TC-089, TC-090 | ✅ | React Router state |

### 2.6 詳細ページ機能

| 要件ID | 要件内容 | テスト条件ID | カバレッジ | 備考 |
|--------|----------|-------------|-----------|------|
| REQ-DET-001 | ポケモン詳細表示 | TC-062, TC-063, TC-064, TC-065, TC-066 | ✅ | 基本機能 |
| REQ-DET-002 | 基本情報表示 | TC-067 | ✅ | 基本機能 |
| REQ-DET-003 | 説明文表示 | TC-068 | ✅ | 基本機能 |
| REQ-DET-004 | 能力値表示 | TC-069, TC-070, TC-071 | ✅ | 基本機能 |
| REQ-DET-005 | 進化チェーン表示 | TC-072 | ✅ | 主要機能 |
| **REQ-DET-006** | **進化チェーンからの遷移** | **TC-073, TC-074** | ✅ | **v3追加機能** |
| REQ-DET-007 | 出現シリーズ表示 | TC-075 | ✅ | 基本機能 |
| REQ-DET-008 | 前後ナビゲーション | TC-076, TC-077, TC-078, TC-079 | ✅ | 主要機能 |
| REQ-DET-009 | お気に入り登録 | TC-080, TC-081, TC-082 | ✅ | 主要機能 |

### 2.7 非機能要件

| 要件ID | 要件内容 | テスト条件ID | カバレッジ | 備考 |
|--------|----------|-------------|-----------|------|
| REQ-018 | 初回読み込み時間 | TC-095 | ✅ | 30秒以内 |
| REQ-019 | フィルタ適用時間 | TC-096 | ✅ | 3秒以内 |
| REQ-020 | ブラウザ互換性 | TC-099, TC-100 | ⚠️ | Chromeのみテスト |

---

## 3. カバレッジサマリー

### 3.1 機能別カバレッジ

| 機能カテゴリ | 要件数 | テスト条件数 | カバレッジ率 | 状態 |
|-------------|--------|------------|------------|------|
| データ取得機能 | 4 | 7 | 175% | ✅ 十分 |
| 検索・フィルタ機能 | 6 | 33 | 550% | ✅ 十分 |
| 表示機能 | 3 | 12 | 400% | ✅ 十分 |
| お気に入り機能 | 2 | 7 | 350% | ✅ 十分 |
| ページ状態保持機能 | 2 | 4 | 200% | ✅ 十分 |
| 詳細ページ機能 | 9 | 17 | 189% | ✅ 十分 |
| 非機能要件 | 3 | 3 | 100% | ✅ 十分 |
| **合計** | **29** | **83** | **286%** | **✅ 十分** |

### 3.2 優先度別カバレッジ

| 優先度 | 要件数 | テスト条件数 | カバレッジ率 | 状態 |
|--------|--------|------------|------------|------|
| P0（最高） | 12 | 35 | 292% | ✅ 十分 |
| P1（高） | 12 | 35 | 292% | ✅ 十分 |
| P2（中） | 4 | 11 | 275% | ✅ 十分 |
| P3（低） | 1 | 2 | 200% | ✅ 十分 |

### 3.3 リスク別カバレッジ

| リスクレベル | 要件数 | テスト条件数 | カバレッジ率 | 状態 |
|-------------|--------|------------|------------|------|
| 高リスク | 8 | 20 | 250% | ✅ 十分 |
| 中リスク | 15 | 45 | 300% | ✅ 十分 |
| 低リスク | 6 | 18 | 300% | ✅ 十分 |

---

## 4. 未カバー要件の確認

### 4.1 テスト条件がない要件

| 要件ID | 要件内容 | 理由 | 対応 |
|--------|----------|------|------|
| なし | - | - | すべての要件に対応するテスト条件あり |

### 4.2 部分的にカバーされている要件

| 要件ID | 要件内容 | 不足しているテスト条件 | 対応 |
|--------|----------|----------------------|------|
| REQ-012 | レスポンシブ対応 | スマホ・タブレットのテスト | テスト計画書でPCのみテストと明記 |
| REQ-020 | ブラウザ互換性 | 他ブラウザのテスト | テスト計画書でChromeのみテストと明記 |

---

## 5. テスト条件と要件の双方向トレーサビリティ

### 5.1 テスト条件から要件への逆引き

| テスト条件ID | テスト条件 | 対応する要件ID | 備考 |
|-------------|-----------|--------------|------|
| TC-015 | 複数タイプを選択した場合、すべてのタイプを含むポケモンのみ表示される（AND条件） | **REQ-006** | **仕様変更点・重要** |
| TC-028 | 複数世代を選択した場合、いずれかの世代に該当するポケモンが表示される（OR条件） | **REQ-008** | **仕様変更点・重要** |
| TC-032 | generationフィールドが正しく取得されている | **REQ-008** | **バグ修正点** |
| TC-073 | 進化チェーンのポケモンアイコンをクリックで詳細ページに遷移できる | **REQ-DET-006** | **v3追加機能** |
| TC-074 | 進化チェーンのポケモン名をクリックで詳細ページに遷移できる | **REQ-DET-006** | **v3追加機能** |

### 5.2 重要テスト条件の特定

以下のテスト条件は、仕様変更点やバグ修正点に関連するため、特に重要です：

1. **TC-015**: タイプフィルタのAND条件（仕様変更点）
2. **TC-028**: 出現シリーズフィルタのOR条件（仕様変更点）
3. **TC-032**: generationフィールドの取得（バグ修正点）
4. **TC-073, TC-074**: 進化チェーンからの遷移（v3追加機能）

---

## 6. カバレッジ確認チェックリスト

### 6.1 基本機能のカバレッジ
- [x] データ取得機能：すべての要件に対応するテスト条件あり
- [x] 検索機能：すべての要件に対応するテスト条件あり
- [x] フィルタ機能：すべての要件に対応するテスト条件あり
- [x] 表示機能：すべての要件に対応するテスト条件あり
- [x] 詳細ページ機能：すべての要件に対応するテスト条件あり
- [x] お気に入り機能：すべての要件に対応するテスト条件あり

### 6.2 仕様変更点のカバレッジ
- [x] タイプフィルタのAND条件：テスト条件あり（TC-015）
- [x] 出現シリーズフィルタのOR条件：テスト条件あり（TC-028）
- [x] generationフィールドの取得：テスト条件あり（TC-032）
- [x] 進化チェーンからの遷移：テスト条件あり（TC-073, TC-074）

### 6.3 非機能要件のカバレッジ
- [x] パフォーマンス要件：テスト条件あり（TC-095, TC-096）
- [x] レスポンシブ対応：部分的にテスト条件あり（PCのみ）
- [x] ブラウザ互換性：部分的にテスト条件あり（Chromeのみ）

### 6.4 エラーハンドリングのカバレッジ
- [x] APIエラーハンドリング：テスト条件あり（TC-005, TC-006）
- [x] 存在しないIDのエラー：テスト条件あり（TC-064）
- [x] 検索結果が空の場合：テスト条件あり（TC-012）

---

## 7. テスト実施時の注意事項

### 7.1 優先的にテストすべき項目
以下のテスト条件は、仕様変更点やバグ修正点に関連するため、優先的にテストを実施してください：

1. **TC-015**: タイプフィルタのAND条件
2. **TC-028**: 出現シリーズフィルタのOR条件
3. **TC-032**: generationフィールドの取得
4. **TC-073, TC-074**: 進化チェーンからの遷移

### 7.2 テスト実施順序
1. Phase 1: P0項目（基本機能）
2. Phase 2: 仕様変更点・バグ修正点（TC-015, TC-028, TC-032, TC-073, TC-074）
3. Phase 3: P1項目（主要機能）
4. Phase 4: P2項目（補助機能）

---

## 8. 承認

| 役割 | 氏名 | 承認日 | 承認 |
|------|------|--------|------|
| QAエンジニア | - | - | ☐ |
| プロジェクトマネージャー | - | - | ☐ |

---

## 付録：要件ID一覧

### 機能要件
- REQ-001 ～ REQ-017: 主要機能要件
- REQ-DET-001 ～ REQ-DET-009: 詳細ページ機能要件

### 非機能要件
- REQ-018: 初回読み込み時間
- REQ-019: フィルタ適用時間
- REQ-020: ブラウザ互換性

