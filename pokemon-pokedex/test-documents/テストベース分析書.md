# ポケモン図鑑アプリ v3 テストベース分析書

## 1. ドキュメント情報

| 項目 | 内容 |
|------|------|
| プロジェクト名 | ポケモン図鑑アプリ v3 |
| バージョン | v3.0 |
| 作成日 | 2025-11-30 |
| 作成者 | QAエンジニア |
| 承認者 | - |
| 承認日 | - |

---

## 2. 要件の明確化・質問リスト

### 2.1 機能要件の明確化

#### 2.1.1 データ取得機能

| 要件ID | 要件内容 | 明確化事項 | 質問・懸念事項 |
|--------|----------|------------|----------------|
| REQ-001 | 全1025匹のポケモンリストを取得 | 初回読み込み時に全件取得するか、段階的取得か | **回答**: 段階的取得（100件ずつ） |
| REQ-002 | ポケモン詳細データを取得 | 詳細データの取得タイミング | **回答**: バックグラウンドで段階的に取得 |
| REQ-003 | 日本語名・説明文を取得 | 日本語データがない場合のフォールバック | **回答**: 英語名を表示 |
| REQ-004 | APIエラーハンドリング | エラー時の再試行ロジック | **質問**: 再試行回数・間隔の仕様は？ |

#### 2.1.2 検索・フィルタ機能

| 要件ID | 要件内容 | 明確化事項 | 質問・懸念事項 |
|--------|----------|------------|----------------|
| REQ-005 | 検索機能（名前・No.） | 検索対象（日本語名・英語名・No.） | **明確**: 日本語名・英語名・No.すべて |
| REQ-006 | タイプフィルタ（AND条件） | 複数タイプ選択時の動作 | **明確**: すべての選択タイプを含むポケモンのみ |
| REQ-007 | 身長・体重フィルタ | 範囲指定の精度 | **明確**: 身長0.1m単位、体重1kg単位 |
| REQ-008 | 出現シリーズフィルタ（OR条件） | 複数世代選択時の動作 | **明確**: いずれかの世代に該当するポケモン |
| REQ-009 | フィルタ適用タイミング | 即時適用か検索ボタン方式か | **明確**: 検索ボタン方式（「検索実行」クリック時） |
| REQ-010 | フィルタ対象範囲 | 現在のページのみか全件か | **明確**: 全1025匹を対象 |

#### 2.1.3 表示機能

| 要件ID | 要件内容 | 明確化事項 | 質問・懸念事項 |
|--------|----------|------------|----------------|
| REQ-011 | ページネーション | 表示件数（20/50/100件） | **明確**: 3種類から選択可能 |
| REQ-012 | レスポンシブ対応 | 対応端末・解像度 | **質問**: スマホ・タブレットのテスト範囲は？ |
| REQ-013 | 日本語表示 | すべての表示を日本語化 | **明確**: タイプ・能力値・世代名すべて日本語 |

#### 2.1.4 お気に入り機能

| 要件ID | 要件内容 | 明確化事項 | 質問・懸念事項 |
|--------|----------|------------|----------------|
| REQ-014 | お気に入り登録・解除 | 保存先（localStorage） | **明確**: localStorageに保存 |
| REQ-015 | お気に入り画面 | お気に入りのみ表示 | **明確**: リスト画面と同じレイアウト |

#### 2.1.5 ページ状態保持機能

| 要件ID | 要件内容 | 明確化事項 | 質問・懸念事項 |
|--------|----------|------------|----------------|
| REQ-016 | 詳細ページから戻る際の状態保持 | 保持する情報 | **明確**: ページ番号・表示件数・フィルタ条件・スクロール位置 |
| REQ-017 | 状態保持の方法 | React Router state使用 | **明確**: location.stateで保持 |

### 2.2 非機能要件の明確化

| 要件ID | 要件内容 | 明確化事項 | 質問・懸念事項 |
|--------|----------|------------|----------------|
| REQ-018 | パフォーマンス | 初回読み込み時間 | **質問**: 許容範囲は？ → **回答**: 30秒以内 |
| REQ-019 | パフォーマンス | フィルタ適用時間 | **質問**: 許容範囲は？ → **回答**: 3秒以内 |
| REQ-020 | ブラウザ互換性 | 対応ブラウザ | **質問**: テスト対象ブラウザは？ → **回答**: Chrome（Chromium系）のみ |

### 2.3 未解決の質問・懸念事項

| No. | 質問内容 | 優先度 | 回答期限 | 回答者 |
|-----|----------|--------|----------|--------|
| Q-001 | APIエラー時の再試行ロジックの詳細 | 中 | - | - |
| Q-002 | スマホ・タブレットのテスト範囲 | 低 | - | - |
| Q-003 | ブラウザ別テストの必要性 | 低 | - | - |

---

## 3. テスト可能性の評価

### 3.1 テスト可能性マトリクス

| 機能 | テスト可能性 | 評価理由 | リスク |
|------|------------|----------|--------|
| データ取得 | ⭐⭐⭐⭐ | APIが外部依存だが、モック可能 | 中：API障害時 |
| 検索機能 | ⭐⭐⭐⭐⭐ | 完全にテスト可能 | 低 |
| フィルタ機能 | ⭐⭐⭐⭐⭐ | 完全にテスト可能 | 低 |
| ページネーション | ⭐⭐⭐⭐⭐ | 完全にテスト可能 | 低 |
| お気に入り機能 | ⭐⭐⭐⭐⭐ | localStorageの動作確認可能 | 低 |
| ページ状態保持 | ⭐⭐⭐⭐ | React Routerの動作確認可能 | 低 |
| レスポンシブ | ⭐⭐⭐ | 手動確認のみ | 中：端末依存 |
| パフォーマンス | ⭐⭐⭐ | ネットワーク環境に依存 | 中：環境依存 |

**凡例**: ⭐⭐⭐⭐⭐ = 完全にテスト可能、⭐⭐⭐⭐ = ほぼテスト可能、⭐⭐⭐ = 条件付きでテスト可能

### 3.2 テスト不可能・困難な項目

| 項目 | 理由 | 代替案 |
|------|------|--------|
| 外部API（PokéAPI）の動作 | 外部依存のため制御不可 | モックデータを使用 |
| ネットワーク遅延の再現 | 環境依存 | 複数回測定し平均値を採用 |
| 全ブラウザでの動作確認 | リソース制約 | Chrome（Chromium系）のみテスト |

### 3.3 テスト環境の制約

| 制約事項 | 影響 | 対策 |
|----------|------|------|
| 外部API依存 | API障害時にテスト中断 | モックデータ準備 |
| ネットワーク環境 | パフォーマンス測定のばらつき | 複数回測定 |
| テスト端末限定 | レスポンシブテストの限界 | PCのみテスト |

---

## 4. テスト対象の優先度付け

### 4.1 優先度定義

- **P0（最高）**: 基本機能。これが動作しないとアプリが使用不可
- **P1（高）**: 主要機能。ユーザー体験に大きく影響
- **P2（中）**: 補助機能。なくても動作するが、あると便利
- **P3（低）**: エッジケース・エラーハンドリング

### 4.2 機能別優先度マトリクス

| 機能カテゴリ | 機能名 | 優先度 | 理由 |
|-------------|--------|--------|------|
| **データ取得** | 全ポケモンリスト取得 | P0 | 基本機能の前提 |
| **データ取得** | ポケモン詳細取得 | P0 | 基本機能の前提 |
| **データ取得** | 日本語データ取得 | P0 | 仕様要件 |
| **データ取得** | APIエラーハンドリング | P1 | ユーザー体験に影響 |
| **検索・フィルタ** | 検索機能（名前・No.） | P0 | 主要機能 |
| **検索・フィルタ** | タイプフィルタ（AND） | P0 | 主要機能・仕様変更点 |
| **検索・フィルタ** | 身長・体重フィルタ | P1 | 主要機能 |
| **検索・フィルタ** | 出現シリーズフィルタ（OR） | P1 | 主要機能・仕様変更点 |
| **検索・フィルタ** | フィルタモーダル | P1 | UI/UX |
| **検索・フィルタ** | フィルタタグ表示・削除 | P2 | 補助機能 |
| **表示** | ポケモン一覧表示 | P0 | 基本機能 |
| **表示** | ページネーション | P0 | 基本機能 |
| **表示** | 日本語表示 | P0 | 仕様要件 |
| **表示** | レスポンシブ対応 | P2 | 補助機能 |
| **詳細ページ** | ポケモン詳細表示 | P0 | 基本機能 |
| **詳細ページ** | 進化チェーン表示 | P1 | 主要機能 |
| **詳細ページ** | 前後ナビゲーション | P1 | 主要機能 |
| **詳細ページ** | 進化チェーンからの遷移 | P2 | 補助機能（v3追加機能） |
| **お気に入り** | お気に入り登録・解除 | P1 | 主要機能 |
| **お気に入り** | お気に入り画面 | P1 | 主要機能 |
| **状態保持** | ページ状態保持 | P2 | 補助機能・UX向上 |
| **パフォーマンス** | 初回読み込み時間 | P1 | ユーザー体験 |
| **パフォーマンス** | フィルタ適用時間 | P1 | ユーザー体験 |

### 4.3 テスト実施順序

#### Phase 1: P0項目（必須）
1. データ取得機能
2. ポケモン一覧表示
3. 検索機能
4. タイプフィルタ（AND条件）
5. 詳細ページ表示
6. 日本語表示

#### Phase 2: P1項目（重要）
1. 出現シリーズフィルタ（OR条件）
2. 身長・体重フィルタ
3. フィルタモーダル
4. お気に入り機能
5. 進化チェーン表示
6. 前後ナビゲーション
7. パフォーマンステスト

#### Phase 3: P2項目（補助）
1. フィルタタグ表示・削除
2. ページ状態保持
3. 進化チェーンからの遷移
4. レスポンシブ対応

#### Phase 4: P3項目（エッジケース）
1. エラーハンドリング詳細確認
2. エッジケーステスト

---

## 5. リスク評価

### 5.1 技術リスク

| リスク | 影響度 | 発生確率 | リスクレベル | 対策 |
|--------|--------|----------|------------|------|
| 外部API障害 | 高 | 中 | 高 | モックデータ準備 |
| ネットワーク遅延 | 中 | 高 | 中 | 複数回測定 |
| 大量データ処理のパフォーマンス | 中 | 中 | 中 | パフォーマンステスト実施 |

### 5.2 テストリスク

| リスク | 影響度 | 発生確率 | リスクレベル | 対策 |
|--------|--------|----------|------------|------|
| テスト時間不足 | 中 | 中 | 中 | 優先度付け実施 |
| テスト環境の不備 | 高 | 低 | 中 | 事前環境確認 |
| 仕様の不明確さ | 中 | 低 | 低 | 質問リスト作成 |

---

## 6. テスト完了基準

### 6.1 必須条件
- P0項目のテスト結果が100%合格
- P1項目のテスト結果が90%以上合格
- クリティカルな不具合が0件

### 6.2 品質基準
- 仕様書との不一致が0件
- 日本語表示の誤りが0件
- 重大なUI不具合が0件

---

## 7. 承認

| 役割 | 氏名 | 承認日 | 承認 |
|------|------|--------|------|
| QAエンジニア | - | - | ☐ |
| プロジェクトマネージャー | - | - | ☐ |

